{"version":3,"file":"commonHelpers.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js"],"sourcesContent":["import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nlet galleryImage = null;\n\nexport async function renderImages(images, task) {\n    let gallery = document.querySelector(\".image-gallery\");\n    let cardHTML = ``;\n    \n    const loadingIndicator = document.querySelector(\".container-loader\");\n    loadingIndicator.style.display = 'block';\n    \n    const buttonLoad = document.querySelector(\".load-button\");\n\n    await new Promise(resolve => setTimeout(resolve, 1000));\n    \n    images.forEach(image => {\n        cardHTML += `\n            <li class=\"image-card\">\n                <a class=\"gallery-link\" href=\"${image.webformatURL}\">\n                    <img class=\"img-example\" src=\"${image.webformatURL}\" alt=\"${image.tags}\"></img>\n                </a>\n\n                    <div class=\"tumb\">\n                        <ul class=\"box-info\">\n                            <li>\n                                <p>Likes</p>\n                                <p>${image.likes}</p>\n                            </li>\n                            <li>\n                                <p>Views</p>\n                                <p>${image.views}</p>\n                            </li>\n                            <li>\n                                <p>Comments</p>\n                                <p>${image.comments}</p>\n                            </li>\n                            <li>\n                                <p>Downloads</p>\n                                <p>${image.downloads}</p>\n                            </li>\n                        </ul>\n                    </div>\n            </li>\n        `;\n    });\n    \n    gallery.insertAdjacentHTML(\"beforeend\", cardHTML);\n    \n    loadingIndicator.style.display = 'none';\n    buttonLoad.style.display = 'block';\n\n    if (galleryImage) {\n        galleryImage.destroy();\n    }\n\n    galleryImage = new SimpleLightbox('.gallery-link', {\n      captionType: 'attr', \n      captionsData: 'alt',\n      captionDelay: 250,\n    });\n    await galleryImage.refresh();\n\n    if (task)\n    {\n        const imageCardHeight = document.querySelector('.image-card').getBoundingClientRect().height * 2;\n        \n        window.scrollBy({\n            top: imageCardHeight,\n            behavior: \"smooth\",\n        });\n    }\n}","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport axios from \"axios\";\nimport '../css/loader.css';\nimport { renderImages } from \"./render-functions\";\n\n\nconst formForSearching = document.querySelector(\".form_images\");\nconst inputSearch = document.querySelector(\".input_searching\");\nconst buttonLoad = document.querySelector(\".load-button\");\nconst loadingIndicator = document.querySelector(\".container-loader\");\nconst gallery = document.querySelector(\".image-gallery\");\n\nlet searchParams;\nlet searchQuery;\nlet currentPage = 1;\nlet amountImages;\nlet sumPage = 0;\n\n\nformForSearching.addEventListener(\"submit\", async (e) => {\n    e.preventDefault();\n\n    searchQuery = inputSearch.value.trim();\n    inputSearch.value = '';\n\n    if (!searchQuery) {\n        iziToast.error({\n            title: \"Error\",\n            message: \"Please enter a keyword for search\",\n        });\n        return;\n    }\n    \n    gallery.innerHTML = '';\n    buttonLoad.style.display = 'none';\n\n    searchParams = new URLSearchParams({\n        key: \"42360153-ab2745711a491af6a9cf29268\",\n        q: searchQuery,\n        image_type: \"photo\",\n        orientation: \"horizontal\",\n        safesearch: true,\n        page: 1,\n        per_page: 15,\n    });\n\n    amountImages = searchParams.get(\"per_page\");\n\n    try {\n        const response = await axios.get(`https://pixabay.com/api/?${searchParams.toString()}`);\n        if (response.status < 200 || response.status >= 300) {\n            throw new Error(\"Failed to fetch images\");\n        }\n        const data = response.data;\n        if (data.hits.length === 0) {\n            throw new Error(\"No images found\");\n        }\n        renderImages(data.hits, 0);\n        sumPage += 1;\n    } catch (error) {\n        iziToast.error({\n            title: \"Error\",\n            message: error.message,\n        });\n    }\n});\n\nbuttonLoad.addEventListener(\"click\", async (e) => {\n    e.preventDefault();\n    \n    buttonLoad.style.display = 'none';\n    loadingIndicator.style.display = 'block';\n\n    currentPage++;\n    searchParams.set('page', currentPage);\n\n    try {\n        const response = await axios.get(`https://pixabay.com/api/?${searchParams.toString()}`);\n        \n        if (response.data.totalHits <= amountImages * sumPage) {\n            loadingIndicator.style.display = 'none';\n            throw new Error(\"We're sorry, but you've reached the end of search results.\");\n        }\n            \n        const data = response.data;\n        renderImages(data.hits, 1);\n        sumPage += 1;\n    } catch (error) {\n        iziToast.error({\n            title: \"Error\",\n            message: error.message,\n        });\n    }\n});"],"names":["galleryImage","renderImages","images","task","gallery","cardHTML","loadingIndicator","buttonLoad","resolve","image","SimpleLightbox","imageCardHeight","formForSearching","inputSearch","searchParams","searchQuery","currentPage","amountImages","sumPage","e","iziToast","response","axios","data","error"],"mappings":"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"}