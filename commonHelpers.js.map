{"version":3,"file":"commonHelpers.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js"],"sourcesContent":["import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nlet galleryImage = null;\n\nexport async function renderImages(images) {\n    let gallery = document.querySelector(\".image-gallery\");\n    let cardHTML = ``;\n    \n    const loadingIndicator = document.querySelector(\".container-loader\");\n    loadingIndicator.style.display = 'block';\n    \n    const buttonLoad = document.querySelector(\".load-button\");\n\n    await new Promise(resolve => setTimeout(resolve, 1000));\n    \n    images.forEach(image => {\n        cardHTML += `\n            <li class=\"image-card\">\n                <a class=\"gallery-link\" href=\"${image.webformatURL}\">\n                    <img class=\"img-example\" src=\"${image.webformatURL}\" alt=\"${image.tags}\"></img>\n                </a>\n\n                    <div class=\"tumb\">\n                        <ul class=\"box-info\">\n                            <li>\n                                <p>Likes</p>\n                                <p>${image.likes}</p>\n                            </li>\n                            <li>\n                                <p>Views</p>\n                                <p>${image.views}</p>\n                            </li>\n                            <li>\n                                <p>Comments</p>\n                                <p>${image.comments}</p>\n                            </li>\n                            <li>\n                                <p>Downloads</p>\n                                <p>${image.downloads}</p>\n                            </li>\n                        </ul>\n                    </div>\n            </li>\n        `;\n    });\n    \n    gallery.insertAdjacentHTML(\"beforeend\", cardHTML);\n    \n    loadingIndicator.style.display = 'none';\n    buttonLoad.style.display = 'block';\n\n    if (galleryImage) {\n        await galleryImage.destroy();\n    }\n\n    galleryImage = new SimpleLightbox('.gallery-link', {\n      captionType: 'attr', \n      captionsData: 'alt',\n      captionDelay: 250,\n    });\n    await galleryImage.refresh();\n}","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport axios from \"axios\";\nimport '../css/loader.css';\nimport { renderImages } from \"./render-functions\";\n\n\nconst formForSearching = document.querySelector(\".form_images\");\nconst inputSearch = document.querySelector(\".input_searching\");\nconst buttonLoad = document.querySelector(\".load-button\");\nconst loadingIndicator = document.querySelector(\".container-loader\");\nconst gallery = document.querySelector(\".image-gallery\");\n\nlet searchParams;\nlet currentPage = 1;\nlet sumPage = 0;\n\n\nformForSearching.addEventListener(\"submit\", async (e) => {\n    e.preventDefault();\n\n    if (!inputSearch.value.trim()) {\n        iziToast.error({\n            title: \"Error\",\n            message: \"Please enter a keyword for search\",\n        });\n        return;\n    }\n\n    searchParams = new URLSearchParams({\n        key: \"42360153-ab2745711a491af6a9cf29268\",\n        q: inputSearch.value.trim(),\n        image_type: \"photo\",\n        orientation: \"horizontal\",\n        safesearch: true,\n        page: 1,\n        per_page: 15,\n    });\n\n    inputSearch.value = '';    \n    gallery.innerHTML = '';\n    buttonLoad.style.display = 'none';\n\n    try {\n        const response = await axios.get(`https://pixabay.com/api/?${searchParams.toString()}`);\n        if (response.status < 200 || response.status >= 300) {\n            throw new Error(\"Failed to fetch images\");\n        }\n        const data = response.data;\n        if (data.hits.length === 0) {\n            throw new Error(\"No images found\");\n        }\n        await renderImages(data.hits);\n\n        if (response.data.totalHits <= searchParams.get('per_page')) {\n            buttonLoad.style.display = 'none';\n            throw new Error(\"We're sorry, but you've reached the end of search results.\");\n        }\n        sumPage = 1;\n        currentPage = 1;\n    } catch (error) {\n        iziToast.error({\n            title: \"Error\",\n            message: error.message,\n        });\n    }\n});\n\nbuttonLoad.addEventListener(\"click\", async (e) => {\n    e.preventDefault();\n    \n    buttonLoad.style.display = 'none';\n    loadingIndicator.style.display = 'block';\n\n    currentPage++;\n    searchParams.set('page', currentPage);\n\n    try {\n        const response = await axios.get(`https://pixabay.com/api/?${searchParams.toString()}`);\n        const data = response.data;\n        await renderImages(data.hits);\n\n        const imageCardHeight = document.querySelector('.image-card').getBoundingClientRect().height * 2;\n        window.scrollBy({\n            top: imageCardHeight,\n            behavior: \"smooth\",\n        });\n    \n        if (currentPage == Math.ceil(response.data.totalHits/searchParams.get('per_page'))) {\n            loadingIndicator.style.display = 'none';\n            buttonLoad.style.display = 'none';\n            throw new Error(\"We're sorry, but you've reached the end of search results.\");\n        }\n\n        sumPage += 1;\n    } catch (error) {\n        iziToast.error({\n            title: \"Error\",\n            message: error.message,\n        });\n    }\n});"],"names":["galleryImage","renderImages","images","gallery","cardHTML","loadingIndicator","buttonLoad","resolve","image","SimpleLightbox","formForSearching","inputSearch","searchParams","currentPage","sumPage","e","iziToast","response","axios","data","error","imageCardHeight"],"mappings":"owBAGA,IAAIA,EAAe,KAEZ,eAAeC,EAAaC,EAAQ,CACvC,IAAIC,EAAU,SAAS,cAAc,gBAAgB,EACjDC,EAAW,GAEf,MAAMC,EAAmB,SAAS,cAAc,mBAAmB,EACnEA,EAAiB,MAAM,QAAU,QAEjC,MAAMC,EAAa,SAAS,cAAc,cAAc,EAExD,MAAM,IAAI,QAAQC,GAAW,WAAWA,EAAS,GAAI,CAAC,EAEtDL,EAAO,QAAQM,GAAS,CACpBJ,GAAY;AAAA;AAAA,gDAE4BI,EAAM,YAAY;AAAA,oDACdA,EAAM,YAAY,UAAUA,EAAM,IAAI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qCAOrDA,EAAM,KAAK;AAAA;AAAA;AAAA;AAAA,qCAIXA,EAAM,KAAK;AAAA;AAAA;AAAA;AAAA,qCAIXA,EAAM,QAAQ;AAAA;AAAA;AAAA;AAAA,qCAIdA,EAAM,SAAS;AAAA;AAAA;AAAA;AAAA;AAAA,SAMpD,CAAK,EAEDL,EAAQ,mBAAmB,YAAaC,CAAQ,EAEhDC,EAAiB,MAAM,QAAU,OACjCC,EAAW,MAAM,QAAU,QAEvBN,GACA,MAAMA,EAAa,UAGvBA,EAAe,IAAIS,EAAe,gBAAiB,CACjD,YAAa,OACb,aAAc,MACd,aAAc,GACpB,CAAK,EACD,MAAMT,EAAa,SACvB,CCvDA,MAAMU,EAAmB,SAAS,cAAc,cAAc,EACxDC,EAAc,SAAS,cAAc,kBAAkB,EACvDL,EAAa,SAAS,cAAc,cAAc,EAClDD,EAAmB,SAAS,cAAc,mBAAmB,EAC7DF,EAAU,SAAS,cAAc,gBAAgB,EAEvD,IAAIS,EACAC,EAAc,EACdC,EAAU,EAGdJ,EAAiB,iBAAiB,SAAU,MAAOK,GAAM,CAGrD,GAFAA,EAAE,eAAc,EAEZ,CAACJ,EAAY,MAAM,OAAQ,CAC3BK,EAAS,MAAM,CACX,MAAO,QACP,QAAS,mCACrB,CAAS,EACD,MACH,CAEDJ,EAAe,IAAI,gBAAgB,CAC/B,IAAK,qCACL,EAAGD,EAAY,MAAM,KAAM,EAC3B,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,KAAM,EACN,SAAU,EAClB,CAAK,EAEDA,EAAY,MAAQ,GACpBR,EAAQ,UAAY,GACpBG,EAAW,MAAM,QAAU,OAE3B,GAAI,CACA,MAAMW,EAAW,MAAMC,EAAM,IAAI,4BAA4BN,EAAa,UAAU,EAAE,EACtF,GAAIK,EAAS,OAAS,KAAOA,EAAS,QAAU,IAC5C,MAAM,IAAI,MAAM,wBAAwB,EAE5C,MAAME,EAAOF,EAAS,KACtB,GAAIE,EAAK,KAAK,SAAW,EACrB,MAAM,IAAI,MAAM,iBAAiB,EAIrC,GAFA,MAAMlB,EAAakB,EAAK,IAAI,EAExBF,EAAS,KAAK,WAAaL,EAAa,IAAI,UAAU,EACtD,MAAAN,EAAW,MAAM,QAAU,OACrB,IAAI,MAAM,4DAA4D,EAEhFQ,EAAU,EACVD,EAAc,CACjB,OAAQO,EAAO,CACZJ,EAAS,MAAM,CACX,MAAO,QACP,QAASI,EAAM,OAC3B,CAAS,CACJ,CACL,CAAC,EAEDd,EAAW,iBAAiB,QAAS,MAAOS,GAAM,CAC9CA,EAAE,eAAc,EAEhBT,EAAW,MAAM,QAAU,OAC3BD,EAAiB,MAAM,QAAU,QAEjCQ,IACAD,EAAa,IAAI,OAAQC,CAAW,EAEpC,GAAI,CACA,MAAMI,EAAW,MAAMC,EAAM,IAAI,4BAA4BN,EAAa,UAAU,EAAE,EAChFO,EAAOF,EAAS,KACtB,MAAMhB,EAAakB,EAAK,IAAI,EAE5B,MAAME,EAAkB,SAAS,cAAc,aAAa,EAAE,sBAAuB,EAAC,OAAS,EAM/F,GALA,OAAO,SAAS,CACZ,IAAKA,EACL,SAAU,QACtB,CAAS,EAEGR,GAAe,KAAK,KAAKI,EAAS,KAAK,UAAUL,EAAa,IAAI,UAAU,CAAC,EAC7E,MAAAP,EAAiB,MAAM,QAAU,OACjCC,EAAW,MAAM,QAAU,OACrB,IAAI,MAAM,4DAA4D,EAGhFQ,GAAW,CACd,OAAQM,EAAO,CACZJ,EAAS,MAAM,CACX,MAAO,QACP,QAASI,EAAM,OAC3B,CAAS,CACJ,CACL,CAAC"}